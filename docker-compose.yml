version: "3"

services:
  grpc-gateway-sample:
    container_name: grpc_gateway_sample
    build: ./services/api
    ports:
      - "10020:9090"
    volumes:
      - ./services/api:/grpc_gateway_sample
    tty: true
    stdin_open: true

  db:
    container_name: postgres
    build: ./services/db
    ports:
      - "10030:5432"
    environment:
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: password+1
    volumes:
      - ./services/db/postgres:/var/lib/postgresql

  pgweb:
    image: sosedoff/pgweb
    container_name: pgweb
    environment:
      - DATABASE_URL=postgres://admin:password+1@db:5432/testdb?sslmode=disable
    ports:
      - "10031:8081"
    links:
      - db:postgres
    restart: always
